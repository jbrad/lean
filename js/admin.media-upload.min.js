function launchMediaUploader(a,b,c,d,e){var f,g,h,i,j,k=c+_.random(0,100),l=views[k],m=a(this);b.preventDefault(),l||(l=wp.media.frames.file_frame=wp.media({title:"Select "+c,button:{text:"Select "+c},multiple:!1}),l.on("ready",function(){d?(a(".media-sidebar").hide(),a(".attachments").css("right",0),a(".media-toolbar").css("right",20)):(f=l.$el.find(".media-sidebar"),0===f.find(".setting").length&&f.append('<label class="setting link"><span>Link URL</span><input class="link" type="text" data-setting="linkUrl" value=""></label>'))}),l.on("select",function(){g=l.state().get("selection").first().toJSON(),e?(h=m.parent().next('input[type="hidden"]'),i=h.next('input[type="hidden"]'),m.attr("src",g.url),h.val(g.url),i.val(l.$el.find(".setting input.link").val())):(j=m.parents("tr"),j.find("img").attr("src",g.url).show(),j.find("input[type=hidden]").val(g.url),j.find(".button.delete").show())}),views[k]=l),l.open()}var views={};!function(a){"use strict";a(function(){a(".button.upload").unbind("click").click(function(b){launchMediaUploader.call(this,a,b,a(this).parents("tr").find("th").html(),!0,!1)}),a(".delete").click(function(b){b.preventDefault(),a(this).parent().find("div").find("img").attr("src",""),a(this).parent().find("input[type=hidden]").val(""),a(this).hide()})})}(jQuery);